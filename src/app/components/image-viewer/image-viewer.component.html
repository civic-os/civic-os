<dialog #imageDialog class="modal">
  <div class="modal-box max-w-6xl p-0">
    <!-- Header -->
    <div class="flex justify-between items-center p-4 pb-3">
      <h3 class="font-bold text-lg">{{ currentImage()?.file_name }}</h3>
      <button (click)="close()" class="btn btn-sm btn-circle btn-ghost">âœ•</button>
    </div>

    <!-- Image Container -->
    <div class="overflow-auto max-h-[70vh] bg-base-200 flex items-start justify-center">
      @if (currentImage()) {
        <img
          [src]="getImageUrl()"
          [alt]="currentImage()!.file_name"
          [class.w-full]="!zoomed()"
          class="not-prose block max-w-full"
        />
      }
    </div>

    <!-- Actions -->
    <div class="modal-action px-4 pb-4 pt-3">
      <button (click)="toggleZoom()" class="btn">
        {{ zoomed() ? 'Fit to Screen' : 'Actual Size' }}
      </button>
      <button (click)="downloadImage()" class="btn btn-primary">
        Download
      </button>
      <button (click)="close()" class="btn">Close</button>
    </div>
  </div>

  <!-- Backdrop -->
  <form method="dialog" class="modal-backdrop">
    <button>close</button>
  </form>
</dialog>
