<div class="prose">
  @if (entity$ | async; as entity) {
    @if (properties$ | async; as props) {
      @if (data$ | async; as data) {
        <h1 class="mt-4">{{ entity.display_name }}: {{ data.display_name }}
          @if (entity.update) {
            <button class="btn btn-accent ml-8" [routerLink]="'/edit/' + entityKey + '/' + data.id">
              <span class="material-symbols-outlined">edit</span> Edit {{data.display_name}}
            </button>
          }
        </h1>
        <h2>Id: {{data.id}}</h2>
        <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 2xl:grid-cols-8 gap-6">
          @for (prop of props; track prop) {
            <div [class]="'col-span-full sm:col-span-' + Math.min(SchemaService.getColumnSpan(prop), 3) + ' lg:col-span-' + Math.min(SchemaService.getColumnSpan(prop), 6) + ' 2xl:col-span-' + SchemaService.getColumnSpan(prop)">
              <app-display-property [datum]="data[prop.column_name]" [property]="prop"></app-display-property>
            </div>
          }
        </div>
      }
    }
  }
</div>
