<div class="prose">
  @if (entity$ | async; as entity) {
    @if (properties$ | async; as props) {
      @if (data$ | async; as data) {
        <h1 class="mt-4">{{ entity.display_name }}: {{ data.display_name }}
          @if (entity.update) {
            <button class="btn btn-accent ml-8" [routerLink]="'/edit/' + entityKey + '/' + data.id">
              <span class="material-symbols-outlined">edit</span> Edit {{data.display_name}}
            </button>
          }
        </h1>
        <h2>Id: {{data.id}}</h2>
        @for (prop of props; track prop) {
          <div>
            <h3>
              {{prop.display_name}}
              @if (prop.description) {
                <div class="tooltip tooltip-right inline-block" [attr.data-tip]="prop.description">
                  <span class="material-symbols-outlined text-info cursor-help ml-2 text-xl align-middle">help_outline</span>
                </div>
              }
            </h3>
            <app-display-property [datum]="data[prop.column_name]" [property]="prop"></app-display-property>
          </div>
        }
      }
    }
  }
</div>
