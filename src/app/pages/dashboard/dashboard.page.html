<!-- Dashboard Page -->
<div class="dashboard-page">
  <!-- Loading State -->
  @if (loading()) {
    <div class="loading-container">
      <span class="loading loading-spinner loading-lg text-primary"></span>
      <p class="text-base-content/70 mt-4">Loading dashboard...</p>
    </div>
  }

  <!-- Error State -->
  @if (!loading() && error()) {
    <div class="error-container">
      <div class="alert alert-error max-w-md">
        <span class="material-symbols-outlined">error</span>
        <div>
          <h3 class="font-bold">Failed to Load Dashboard</h3>
          <p class="text-sm">{{ error() }}</p>
        </div>
      </div>
      <button class="btn btn-primary mt-4" (click)="retry()">
        <span class="material-symbols-outlined">refresh</span>
        Retry
      </button>
    </div>
  }

  <!-- Dashboard Content -->
  @if (!loading() && !error() && dashboard()) {
    <div class="dashboard-container">
      <!-- Dashboard Header -->
      <div class="dashboard-header mb-6">
        <h1 class="text-3xl font-bold text-base-content">{{ dashboard()!.display_name }}</h1>
        @if (dashboard()!.description) {
          <p class="text-base-content/70 mt-2">{{ dashboard()!.description }}</p>
        }
      </div>

      <!-- Widgets Grid -->
      @if (widgets().length > 0) {
        <div class="widgets-grid">
          @for (widget of widgets(); track widget.id) {
            <div
              class="widget-cell"
              [style.grid-column]="'span ' + widget.width"
              [style.grid-row]="'span ' + widget.height"
            >
              <app-widget-container [widget]="widget"></app-widget-container>
            </div>
          }
        </div>
      }

      <!-- Empty State (No Widgets) -->
      @if (widgets().length === 0) {
        <div class="empty-state">
          <span class="material-symbols-outlined text-6xl text-base-content/30">widgets</span>
          <h3 class="text-xl font-semibold text-base-content/70 mt-4">No Widgets</h3>
          <p class="text-base-content/50 mt-2">
            This dashboard doesn't have any widgets yet.
          </p>
        </div>
      }
    </div>
  }
</div>
