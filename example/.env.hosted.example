# =====================================================
# Civic OS - Hosted Database Configuration
# =====================================================
#
# This file contains configuration for deploying Civic OS to a hosted
# PostgreSQL database (e.g., DigitalOcean, AWS RDS, Azure Database, etc.)
#
# SETUP:
#   1. Copy this file: cp .env.hosted.example .env.hosted
#   2. Fill in your hosted database credentials
#   3. Run: ../scripts/setup-hosted-db.sh
#
# =====================================================

# Database Connection
# =====================================================
# The hostname of your PostgreSQL database
# Examples:
#   - DigitalOcean: db-postgresql-nyc3-12345-do-user-67890-0.b.db.ondigitalocean.com
#   - AWS RDS: mydb.c9akciq32.us-east-1.rds.amazonaws.com
#   - Azure: myserver.postgres.database.azure.com
DB_HOST=your-database-host.com

# Database port (usually 5432)
DB_PORT=5432

# Database name
# Note: DigitalOcean defaults to "defaultdb", others may use "postgres"
DB_NAME=defaultdb

# Database user
# Examples: doadmin (DigitalOcean), postgres (AWS/Azure), your custom user
DB_USER=doadmin

# Database password (master password for your database)
DB_PASSWORD=your-database-password-here

# SSL Mode (recommended: require or verify-full)
# Options: disable, allow, prefer, require, verify-ca, verify-full
SSLMODE=require

# PostgREST Configuration
# =====================================================
# Password for the PostgREST authenticator role
# This is a NEW password you create (not your database password)
# PostgREST will use this role to connect and then switch to web_anon/authenticated
AUTHENTICATOR_PASSWORD=your-authenticator-password-here

# Keycloak Configuration (for authentication)
# =====================================================
# These settings must match your Keycloak instance
KEYCLOAK_URL=https://auth.civic-os.org
KEYCLOAK_REALM=civic-os-dev
KEYCLOAK_CLIENT_ID=myclient

# =====================================================
# SECURITY NOTES
# =====================================================
# 1. Never commit .env.hosted to version control (already in .gitignore)
# 2. Use strong passwords (16+ characters, mixed case, numbers, symbols)
# 3. Enable SSL/TLS in production (SSLMODE=require or verify-full)
# 4. Restrict database access by IP address in your hosting provider
# 5. Rotate passwords periodically
# 6. Use separate databases for dev/staging/production
#
# =====================================================
# PROVIDER-SPECIFIC NOTES
# =====================================================
#
# DigitalOcean Managed PostgreSQL:
#   - Default DB name: defaultdb
#   - Default user: doadmin
#   - SSL required by default
#   - Connection pooling available (use port 25061 for pooled connections)
#   - Get credentials from: Database > Settings > Connection Details
#
# AWS RDS PostgreSQL:
#   - Default DB name: postgres
#   - Default user: postgres (or custom master username)
#   - SSL available (download RDS CA certificate for verify-ca/verify-full)
#   - Get endpoint from: RDS Console > Databases > Your DB > Connectivity
#
# Azure Database for PostgreSQL:
#   - Default user format: username@servername
#   - SSL required by default
#   - Get connection string from: Azure Portal > Your Server > Connection strings
#
# Google Cloud SQL PostgreSQL:
#   - Default user: postgres
#   - Cloud SQL Proxy recommended for secure connections
#   - Get connection from: SQL > Your Instance > Overview > Connect to this instance
#
# =====================================================
